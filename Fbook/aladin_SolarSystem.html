<HTML style="background-color:#ffffff">
<style>
  sm {
    font-size: 10px;
  }

  .title {
    font-size: 13px;
  }

  body {
    font-family: Tahoma, sans-serif;
    margin: 0;
    padding: 0;
  }

  #custom-logo {
    position: relative;
    top: 162px;
    left: 2px;
    width: 36px;
    height: auto;
    z-index: 1000;
  }

  #custom-logo3 {
    position: fixed;
    top: 200px;
    left: 2px;
    width: 43px;
    height: auto;
    z-index: 1000;
  }

  /* Modal Styling */
  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 80%;
    height: 96%;
    background: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  .modal-content {
    background: white;
    padding: 0;
    border-radius: 8px;
    width: 85%;
    height: 80%;
    max-width: 900px;
    max-height: 600px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
  }

  .close-btn {
    align-self: flex-end;
    cursor: pointer;
    font-size: 24px;
    margin: 10px;
  }

  .close-btn3 {
    align-self: flex-end;
    cursor: pointer;
    font-size: 24px;
    margin: 10px;
  }

  iframe {
    flex: 1;
    border: none;
    border-radius: 0 0 8px 8px;
  }

  body {
    font-family: 'Helvetica', sans-serif;
  }
</style>

<HEAD>
  <meta charset="utf-8">
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.min.js" charset="utf-8"></script>
  <script type="text/javascript">var jqMenu = jQuery.noConflict();</script>
  <script type="text/javascript" src="https://aladin.cds.unistra.fr/AladinLite/api/v3/latest/aladin.js"
    charset="utf-8"></script>
  <script>
    const q = new URLSearchParams(location.search);
    const object = q.get('object') ?? 'Earth';
    const lat = parseFloat(q.get('lat') ?? 0);
    const lon = parseFloat(q.get('long') ?? 0);
    const fovValue = parseFloat(q.get('fov') ?? 280);

    const hipsMap = {
      // The Sun
      'Sun': 'CDS/P/Sun/euvi-aia304-2012',
      // Earth & Moon system
      'Earth': 'P/Earth/BlueMarble',
      'EarthElevation': 'P/Earth/DEM/elevation',
      'Moon': 'P/Moon/LROC-WAC-100m',
      'MoonChange2': 'China-VO/P/Change2/moon/7m/DOM',
      'Moon_Geo': 'P/Moon/geological-map',
      // Inner planets
      'Mercury': 'P/Mercury/MESSENGER-MDIS-LOI-166m',
      'Venus': 'P/Venus/Magellan/Topography-4641m',
      'Mars': 'P/Mars/MOLA-color',
      'MarsThemis': 'P/Mars/THEMIS-Day-100m-v12',
      // Dwarf planet
      'Ceres': 'IAPS_P_Ceres_Dawn_FC-CE-LAMO-CLR',
      // Jupiter system
      'Jupiter': 'P/Jupiter/PIA07782',
      'Io': 'P/Io/Galileo-SSI-1km',
      'Callisto': 'P/Callisto/Voyager-Galileo-simp-1km',
      'Ganymede': 'P/Ganymede/VoyagerGalileo-SSI-1km',
      'Europa': 'P/Europa/Voyager-GalileoSSI-500m',
      // Saturn system (selected moons)
      'Dione': 'P/Dione/Cassini-PIA12577',
      'Lapetus': 'P/Iapetus/Cassini-PIA18436',
      'Mimas': 'P/Mimas/Cassini-PIA17214',
      'Rhea': 'P/Rhea/Cassini-PIA12803',
      'Titan': 'P/Titan/ISS-P19658-4km',
      'Tethys': 'P/Tethys/Cassini-PIA18439',
      // Uranus system
      'Titania': 'P/Titania/Voyager',
      'Ariel': 'P/Ariel/Voyager',
      'Miranda': 'P/Miranda/Voyager',
      'Oberon': 'P/Oberon/Voyager',
      'Umbriel': 'P/Umbriel/Voyager',
      // Neptune system
      'Neptune': 'P/Neptune/Voyager2',
      'Triton': 'P/Triton/Voyager2-600m',
      // Pluto system
      'Pluto': 'P/Pluto/NewHorizons-Jul2017-300m',
      'Charon': 'P/Charon/NewHorizon-PIA19866'
    };
    const currentSurvey = hipsMap[object] ?? 'P/Earth/BlueMarble';
    console.log(`Current survey for ${object}: ${currentSurvey}`);

    document.addEventListener('DOMContentLoaded', () => {
      const rb = document.querySelector(`input[value="${currentSurvey}"]`);
      if (rb) rb.checked = true;
    });

    // aladin logic 
    A.init.then(() => {
      const aladin = A.aladin('#aladin-lite-div', {
        survey: 'P/Earth/BlueMarble',
        fov: fovValue,
        target: `${lon} ${lat}`,
        showSimbadPointerControl: false
      });

      let hipsDir;
      function add(name, code, dir, frame = 'equatorial', order = 5, opts = {}) {
        aladin.setImageSurvey(aladin.createImageSurvey(code, name, dir, frame, order, opts));
      }

      /* The Sun */
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Sun_euvi-aia304-2012/';
      add('Sun', 'CDS/P/Sun/euvi-aia304-2012', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });

      /* Earth & Moon */
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Earth_BlueMarble/';
      add('Earth', 'P/Earth/BlueMarble', hipsDir, 'equatorial', 5, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Earth_DEM_elevation/';
      add('EarthElevation', 'P/Earth/DEM/elevation', hipsDir, 'equatorial', 8, { imgFormat: 'png' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Moon_LROC-WAC-100m/';
      add('Moon', 'P/Moon/LROC-WAC-100m', hipsDir, 'equatorial', 3, { imgFormat: 'png' });
      hipsDir = 'https://hips.china-vo.org/change2-moon-7m-dom/';
      add('MoonChange2', 'China-VO/P/Change2/moon/7m/DOM', hipsDir, 'equatorial', 9, { imgFormat: 'png' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Moon_geological-map/';
      add('Moon-Geo', 'P/Moon/geological-map', hipsDir, 'equatorial', 3, { imgFormat: 'png' });

      /* Mercury & Venus */
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Mercury_MESSENGER-MDIS-LOI-166m/';
      add('Mercury', 'P/Mercury/MESSENGER-MDIS-LOI-166m', hipsDir, 'equatorial', 5, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Venus_Magellan_Topography-4641m/';
      add('Venus', 'P/Venus/Magellan/Topography-4641m', hipsDir, 'equatorial', 3, { imgFormat: 'png' });

      /* Mars */
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/Mars_MOLA/';
      add('Mars', 'P/Mars/MOLA-color', hipsDir, 'equatorial', 5, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Mars_THEMIS-Day-100m-v12/';
      add('MarsThemis', 'P/Mars/THEMIS-Day-100m-v12', hipsDir, 'equatorial', 7, { imgFormat: 'jpeg' });

      /* Ceres */
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/IAPS_P_Ceres_Dawn_FC-CE-LAMO-CLR/';
      add('Ceres', 'IAPS_P_Ceres_Dawn_FC-CE-LAMO-CLR', hipsDir, 'equatorial', 5, { imgFormat: 'jpeg' });

      /* Jupiter & moons */
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Jupiter_PIA07782/';
      add('Jupiter', 'P/Jupiter/PIA07782', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Io_Galileo-SSI-1km/';
      add('Io', 'P/Io/Galileo-SSI-1km', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Callisto_Voyager-Galileo-simp-1km/';
      add('Callisto', 'P/Callisto/Voyager-Galileo-simp-1km', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Ganymede_VoyagerGalileo-SSI-1km/';
      add('Ganymede', 'P/Ganymede/VoyagerGalileo-SSI-1km', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Europa_Voyager-GalileoSSI-500m/';
      add('Europa', 'P/Europa/Voyager-GalileoSSI-500m', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });

      /* Saturn moons */
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Dione_Cassini-PIA12577/';
      add('Dione', 'P/Dione/Cassini-PIA12577', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Iapetus_Cassini-PIA18436/';
      add('Lapetus', 'P/Iapetus/Cassini-PIA18436', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Mimas_Cassini-PIA17214/';
      add('Mimas', 'P/Mimas/Cassini-PIA17214', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Rhea_Cassini-PIA12803/';
      add('Rhea', 'P/Rhea/Cassini-PIA12803', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS/P/Titan/ISS-P19658-4km/';
      add('Titan', 'P/Titan/ISS-P19658-4km', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Tethys_Cassini-PIA18439/';
      add('Tethys', 'P/Tethys/Cassini-PIA18439', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });

      /* Uranus moons */
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Titania_Voyager/';
      add('Titania', 'P/Titania/Voyager', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Ariel_Voyager/';
      add('Ariel', 'P/Ariel/Voyager', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Miranda_Voyager/';
      add('Miranda', 'P/Miranda/Voyager', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Oberon_Voyager/';
      add('Oberon', 'P/Oberon/Voyager', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Umbriel_Voyager/';
      add('Umbriel', 'P/Umbriel/Voyager', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });

      /* Neptune system */
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Neptune_Voyager2/';
      add('Neptune', 'P/Neptune/Voyager2', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Triton_Voyager2-600m/';
      add('Triton', 'P/Triton/Voyager2-600m', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });

      /* Pluto system */
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Pluto_NewHorizons-Jul2017-300m/';
      add('Pluto', 'P/Pluto/NewHorizons-Jul2017-300m', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });
      hipsDir = 'https://alasky.cds.unistra.fr/Planets/CDS_P_Charon_NewHorizon-PIA19866/';
      add('Charon', 'P/Charon/NewHorizon-PIA19866', hipsDir, 'equatorial', 3, { imgFormat: 'jpeg' });

      aladin.setBaseImageLayer(currentSurvey);
      aladin.gotoRaDec(lon, lat);

      jqMenu(document).on('change', 'input[name=survey]', function () {
        const val = jqMenu(this).val();
        if (val) aladin.setBaseImageLayer(val);
      });
    });


    // modal logic 
    document.addEventListener('DOMContentLoaded', () => {
      const modal1 = document.getElementById('myModal');
      const modalQ = document.getElementById('myModal3');
      const frame1 = document.getElementById('surveyFrame');
      const frameQ = document.getElementById('SolarSystemFrame');


      // Questions button
      // document.getElementById('custom-logo3').onclick = () => {
      //   frameQ.src = './firmamento-ai-SolarSystem.html';
      //   modalQ.style.display = 'flex';
      // };

      // Close buttons (Ã—)
      document.querySelectorAll('.close-btn, .close-btn3').forEach(btn => btn.onclick = () => {
        frame1.src = frameQ.src = '';
        modal1.style.display = modalQ.style.display = 'none';
      });

      // Click outside => close
      [modal1, modalQ].forEach(m => m.addEventListener('click', e => {
        if (e.target === m) {
          frame1.src = frameQ.src = '';
          modal1.style.display = modalQ.style.display = 'none';
        }
      }));
    });

  </script>

</HEAD>
<script>
  // if (object == "Moon") {
  //   document.getElementById("Moon").checked = true;
  //   SolarSystemObject = "Moon";
  // }
  // else {
  //   alert("Data for object " + object + " not available");
  // }
</script>

<table>
  <tr valign="top">
    <td>
      <div id="aladin-lite-div" style="width:80vw; height:95vh;">
        <div id="al"></div>
        <a href="https://firmamento.nyuad.nyu.edu" target="_blank" rel="noopener noreferrer">
          <img src="./firmamento_logo_orange.png" id="custom-logo" alt="Firmamento logo" title="Firmamento logo">
        </a>
      </div>
    </td>
    <td style="background-color: #ebfafaff">
      <sm>
        <div style="width:18vw;">
          <b><br>
            <center>The Solar system</center>
          </b>
          <input id="Sun" type="radio" name="survey" value="CDS/P/Sun/euvi-aia304-2012"><label for="Sun">The
            Sun</label><br><br>
          <center><strong>The Earrth and its moon (1 of 1)</strong></center><br>
          <input id="Earth" type="radio" name="survey" value="P/Earth/BlueMarble" checked="checked"><label
            for="Earth">Earth</label>
          <input id="EarthElevation" type="radio" name="survey" value="P/Earth/DEM/elevation"><label
            for="EarthElevation">Earth elevation</label><br>
          <input id="Moon" type="radio" name="survey" value="P/Moon/LROC-WAC-100m"><label for="Moon">The Moon</label>
          <input id="MoonChange2" type="radio" name="survey" value="China-VO/P/Change2/moon/7m/DOM"><label
            for="MoonChange2">The Moon (Chang-E2)</label><br>
          <input id="Moon_Geo" type="radio" name="survey" value="P/Moon/geological-map"><label for="Moon_geo">Moon
            Geological map</label><br>
          <center><strong>Mercury (no moons)</strong></center><br>
          <input id="Mercury" type="radio" name="survey" value="P/Mercury/MESSENGER-MDIS-LOI-166m"><label
            for="Mercury">Mercury</label><br>
          <center><strong>Venus (no moons)</strong></center><br>
          <input id="Venus" type="radio" name="survey" value="P/Venus/Magellan/Topography-4641m"><label
            for="Venus">Venus</label><br>
          <center><strong>Mars and its moons (0 of 2) </strong></center><br>
          <input id="Mars" type="radio" name="survey" value="P/Mars/MOLA-color"><label for="Mars">Mars</label>
          <input id="MarsThemis" type="radio" name="survey" value="P/Mars/THEMIS-Day-100m-v12"><label
            for="MarsThemis">Mars (Themis-100m)</label><br>
          <center><strong>Ceres dwarf planet</strong></center>
          <input id="Ceres" type="radio" name="survey" value="IAPS_P_Ceres_Dawn_FC-CE-LAMO-CLR"><label
            for="Ceres">Ceres</label><br><br>
          <center><strong>Jupiter and its moons (4 of 95)</strong></center><br>
          <input id="Jupiter" type="radio" name="survey" value="P/Jupiter/PIA07782"><label
            for="Jupiter">Jupiter</label><br>
          <input id="Io" type="radio" name="survey" value="P/Io/Galileo-SSI-1km"><label for="Io">Io</label>
          <input id="Callisto" type="radio" name="survey" value="P/Callisto/Voyager-Galileo-simp-1km"><label
            for="Callisto">Callisto</label><br>
          <input id="Ganymede" type="radio" name="survey" value="P/Ganymede/VoyagerGalileo-SSI-1km"><label
            for="Ganymede">Ganymede</label>
          <input id="Europa" type="radio" name="survey" value="P/Europa/Voyager-GalileoSSI-500m"><label
            for="Europa">Europa</label><br><br>
          <center><strong>Saturn and its moons (6 of 145)</strong></center><br>
          <input id="Saturn" type="radio" name="survey" value="" disabled><label for="Saturn">Saturn (not yet
            available)</label><br>
          <input id="Dione" type="radio" name="survey" value="P/Dione/Cassini-PIA12577"><label for="Dione">Dione
            (Cassini)</label>
          <input id="Lapetus" type="radio" name="survey" value="P/Iapetus/Cassini-PIA18436"><label for="Lapetus">Lapetus
            (Cassini)</label><br>
          <input id="Mimas" type="radio" name="survey" value="P/Mimas/Cassini-PIA17214"><label for="Mimas">Mimas
            (Cassini)</label>
          <input id="Rhea" type="radio" name="survey" value="P/Rhea/Cassini-PIA12803"><label for="Rhea">Rhea
            (Cassini/Voyager)</label><br>
          <input id="Titan" type="radio" name="survey" value="P/Titan/ISS-P19658-4km"><label for="Titan">Titan
            (Cassini)</label>
          <input id="Tethys" type="radio" name="survey" value="P/Tethys/Cassini-PIA18439"><label for="Tethys">Tethys
            (Cassini)</label><br><br>
          <center><strong>Uranus and its moons (5 of 27)</strong></center><br>
          <input id="Uranus" type="radio" name="survey" value="" disabled><label for="Uranus">Uranus (not yet
            available)</label><br>
          <input id="Titania" type="radio" name="survey" value="P/Titania/Voyager"><label for="Titania">Titania
            (Voyager)</label>
          <input id="Ariel" type="radio" name="survey" value="P/Ariel/Voyager"><label for="Ariel">Ariel</label><br>
          <input id="Miranda" type="radio" name="survey" value="P/Miranda/Voyager"><label for="Miranda">Miranda</label>
          <input id="Oberon" type="radio" name="survey" value="P/Oberon/Voyager"><label for="Oberon">Oberon</label>
          <input id="Umbriel" type="radio" name="survey" value="P/Umbriel/Voyager"><label
            for="Umbriel">Umbriel</label><br><br>
          <center><strong>Neptune and its moons (1 of 14)</strong></center><br>
          <input id="Neptune" type="radio" name="survey" value="P/Neptune/Voyager2"><label for="Neptune">Neptune
            (Voyager2)</label><br>
          <input id="Triton" type="radio" name="survey" value="P/Triton/Voyager2-600m"><label for="Triton">Triton
            (Voyager2)</label><br><br>
          <center><strong>Pluto and its moons (1 of 5) </strong></center><br>
          <input id="Pluto" type="radio" name="survey" value="P/Pluto/NewHorizons-Jul2017-300m"><label
            for="Pluto">Pluto</label><br>
          <input id="Charon" type="radio" name="survey" value="P/Charon/NewHorizon-PIA19866"><label
            for="Charon">Charon</label><br>
          <!-- Modal -->
          <div id="myModal" class="modal">
            <div class="modal-content">
              <span class="close-btn">&times;</span>
              <iframe id="surveyFrame" src=""></iframe>
            </div>
          </div>
          <!-- <img src="./firmamento_logo_questions.png" id="custom-logo3" alt="Questions about the cosmos"
            title="Questions about the cosmos" style="cursor: pointer;" /> -->
          <div id="myModal3" class="modal">
            <div class="modal-content">
              <span class="close-btn3">&times;</span>
              <iframe id="SolarSystemFrame" src=""></iframe>
            </div>
          </div>
        </div>
      </sm>
    </td>
  </tr>
  <tr>
    <td>
      <center>
      </center>
    </td>
  </tr>
</table>

</HTML>